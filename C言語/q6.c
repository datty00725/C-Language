/*
構造体を用いたプログラムです。
今回は、C 言語の標準の整数型で表現できないような大きな整数(多倍長整数) の加算と乗算に関する実装をテーマとした。
(メモリが許す限り) どんな大きな整数の計算も可能であるが、
リストの各要素の型(elementtype) がint 型であるにもかかわらず、0 から9 までしか使っていない(10 進1 桁) 点で無駄がある。
そこでもう少しメモリの利用効率を高めるために10 進4 桁を単位(10000進数) として計算を行う問題とする。
たとえば入力の数123456789 は1 と2345 と6789 に分けて格納するためnode の個数は(頭を除き)3 つですむ( 問題4 では9 つのnode を要する)。
対象のnode 数が減少3 することで計算時間も短縮できる。

入力例
--------------------------------------------------------------------------------------------------------
427894178561086708940973509392098783618282262705019277827415818333807258923735371361566307005582044849338949260494229704132230874302778702016687563332107845234252710789353551415099571114047834397451138887164222162117355270196069581407943333441012524705915302400499514583714629668546435133697596382940886121937134863230495502599575029762299719460311625560355907558296768788876331102441726102967917226046907356400426363663121081116745233782742111679710641612956918357410684820208739581206386940897322967617553409370040994424715509345427923994589316367097556496206319953926080690295527219644972139093478059284669298443486713491076180299954646505074369987377666776295212821280955888547061826997718464075511014516697205073502175306541388110815717000190853619920421250792616334681382003448429546878503621670495627563688889407169424482233746725934506330903274271105590092123782598340202462040418991193236122115573560806255224584909323249144630107361697439998957841738703010959194722737116824370118048558181610242088366258685338045489963900095385942977559271282490712492476733278412371139892213151807340329450893192986181255001486922760989977510274814705201140836388885156928164769368778503975801660798174239655659976760235467582256922480284886471184546382199845308157582394764398636022871188850458441244715501983303100301485202387136910331727643257116703855864174014106161060821037484477255454374357752701346171319498121208109812328994741425904427909186265222405360402608265544832584683733752619811440857649551356067141382653882337439046544630001990736639326916185986280210339766194384746970611013067438501886010667605986365731469634863519066709911088189919108328963554502273362156436728282322457235179510992752113134398207245858740077647587126134722058009663170930161338197599104124091865854816002369595151018938989098988893146926268295856156744679858904669913781742760154547788201854282833948244762187011131084662450608070825404386602530492879612915458793008488651403491517351859471143528568036979204573021118561822091303682645842063101542926246204622700729009151972808382105759021427311295507022350043656573312785026523778503203577531762839324270671598930553731341362829342908432840818355596358901440242472034954113735202105283816264467071158180083881075115221976509888499317214410118868232800718480034580413960635148305439716447239780459488764832822445063831115203194036406230325262931288266528744752612587379549522277497815405690090373766068165395103525221866185275592082285009222725976086911971756864014648925272967044005453901658180161846316546127771825267133016243304289661447633732560628003991785910952297354348418093704797838804600811008836117039033969201598438889578241009923252245487566716948140406210742871181819058402368663723617110874630408844470150645196555882170892741490451922614953493675548453580582542730318214168985973193467147830207030502495138944817103538885212275771863442890422813349402898071996333411877384563911655376286646492067543347378914378711161177081253680586460600526417172419970426842340162280451447618524212430310863636502168916046273506772596589886893577457204560382500744042201638523186874674903222729906510921102929865337265252589005773003949861015567782655965865033315815676354568548825404068618729232650965562980990407031190171933323785134529333614491755706745958537337456122742952762938519605926049434396925006292853783260950658288964718161311808662880367355016648038744168981701141514305660154228360751304732595395022077910606813467166841272524259029009800870889293268770747952956161045267843357323113228611683641941190911569455274728524353063833885912908810508177933758158172510138511222987766748656430251577309415724071767934199239483594768096825702689212523553117311995523152168234089734877244946820953376311126462417506363394899338990605392085756136812862846174347208368114565349931643517973457239535743633024799107093757090963832966235771852774434043123577587226448299864385574418925043141720229905607368328544499536817623907070778198268123983133563869921981180539755735112533222808276730622914011213128673816651675831267924552218456631481635160860470711196329293397128828870180057766935723340845679804906915705049166940207106943934861339958414525695065322435460342666511690969992478070234764348303506041693354792938772419345582866488960108092819815909889683971301920064171463237883617149289430447267411010904221131396706687820502881040659525343223932603193322055523714783905956613804901204405886431276378013683202270147986071036441027110272910538782305674255832574725111155661901243668979160858643605745344770423513673612557911606325654134693429886126751195066910416673121995814593994912281098677034257392262437086975435789795083200374759014452383948375369165922392072400659966424069868288670750346306996521477516949567966418231592672006436439820872259604710409053073698501285929790979593911769139486318614050232709259459633494121686615089626786952116155242799068229977455114768147550493283709651361715834537489201131793577776747477356852926746485172961264699712163519265802143728049081630657626939344119097035261750121452535931325245434480384137120520664416770991244521167473123269771326271048909195913961437659874619458593140598365255898553305315313566842536148335863875736413298338166247838487848884924666734380941522151164476605213600914017371845577304354298034764697655778418740445359692083808819155641625892395207027508961094186857259759634865344654023114935343758106650224679601126111147178850960752241093248086277530649480936125753208893213420472204053069724035164849907949935458272014095111239114496260964186033365562313142658674551544007988943040971032092809798572804415841200797888449028698132373001877708581030056508555613501055739448086512594848209634617982194756334184756005023225798564859354290016301331947971230298265556033164551401104604951538866046486182640356455622696605334951406499270405056633212635471268572673682930403520522450174458617801424632849000963033200665007739749106667340905914158532209130366492021587808474783101162147593874304458030284023261025916128251725748991932488781903901599617997685495773405029406849294529201779551487988877791570253399097874628659790511348204835739921588090736325029559872047883214735327210056237195778257908345276362563035751517580253207385267652708808283790861824405222859994383985501230108962984613147075729181396508224131496515706563413344095326650161909007657044382975660227743127094511628057915369938214763253476406774568610265047578738063189052448695551198863208655078310909894303348294556739625876438993873764398678285639673674321301373313382483464952269297592479312169170925870601939403468365305065451426416412995674939366710340910960851200419633047329969080316919318382296159595207284331972475952034645764457575208886885027345251180392510165339829747158794145617423566065829858449444801310677884573715031514902991719835472321532231257632406796119033462736078749416789710675656220268729195404871792100248218664526818587555250889621071149413324174465638327526301767815603569440194567429281021281455415149060061690465910937990605959204630173354215754666064445245206443936580108599063210112188691764755653629883531156576435180404066970242493427998857720720885673090547330763940573471949338762
349536857921613099217335229643734141924445195976205766946913044975563931936315390385658655898811784639286290825766016506609888051327907544727078968934782445864548851368187227710987569883439112877845548270052494340771523898591170664862953368052085585763655552612640532478040949228607185692477078989988455854659292503506495338733917289713769567798417797521609856381144403652407835114403525331604251122473681573468458686746992589015234926232681725880437806879209528846678052790368154551802452825814917970504325320351323677229324312793305817274566634841626442193095683386376677030614657579177432994517080142106182573340438530560173173102224442798769497838967200357836446730810304443859765893367121690750246014064631370191804226743879258549765529602823785031021367022114939827791375588495953994936597626890252593194790063143792180953225268818878159103211936157068500403968000018765677410809399929417478196868432330688726869230308570207458143059422383233758093838263576354826767328276576341377407427045295138979730862996777106413842838476298641298049463400475385519842091492916889595528844816979140095646590198452625908767122376701218928434770385491448120212286930758845056610800579277964408331501131718309738519137428960635653853820306661766339045945668314368570509192009878065108563138955684395144297677068367752533722698463345621070331644974219142151489731120100042236187655899463506069482147093378569813528940755087905811086029627474896484757070664786754378212786363051374243745012666508719810338937997610898579970317753063219082234394584805875011687492797751754616670936296189068567756602007909240945444939448074707993675988298183339577997347772759248668896260263894111322284514845735896482880086078022907649067374397866690919891446817301148877922427103137016999788076471249884328981221509263352564778606105392796260330623182510227898526900296701291364343693208357445764485163698433382419889392576580568344191070991548306634167662990140139324573049116935155717833966009218344090114148208684701794366783036167722778783989392973198341172070663602650846013001361627722456883549562761615594197244363522249811396320798748790621060042174823451004710515680965749236966045650327004498098034085313071411279551847865913453063670004598393709357220328512370144969711147285339031005200485918724711264266662436232961440935394411416053412849559870249785362121450095299172180064547309352769314035493626684918636014038710157986512706643708017098206703449508507345845144397466285946021975556458902478709893694867017902450476914142060037985320319726352997450547876099136030180705081502566636225449448434009155624200512366003807196965483028119189955717467967662304256951486059511471615463663169499810800795259223332617712048389825249267312604128402390065334120643973415764967162981699396520333386222824511874021121164904275947209391332198840969785121646166494090162548073046685109472280287743860347966578276704202327504402556878744990944635283514690124945051398482383456104815862009676381500978717520750154555880318854955816914151677269074226793416156858304092578641659431056814651752102585039310045589547897836590126729083598789578020851112459976684295184915069291317291800103257282521165634441697604733757936503028825120629409753025666252115867265615648039408844746198683833329720309876171531053727785383221332833364215871491934317133409851069080465037960602258848090394871564193146927734469339523439519395231379679318047008539823951129102942051384848489138791518801907379551101464502609016422705693627301736805749344796293615728643281529820765173368940571455775060425944139962584647091640200440573454016962596702953402510302838584255375824898656476965296198681836852838482189419267541688851693632106470889397466641000969172221460768121500029381797050904904221690915734931185825330399600715404938500155450559854409067747737845340444190385983165382124428684158099342864948564077330614711381284198775783984276536394107572667361383282814277799890145242835195772416973250042964482622015578782247301836041007494281985736049286079212176455827116259542252774136446964143753838819379942462618673752564879174878001564992817647372448210688272283495149015419954042603768778014430335303249779316852392910128989390369795445500953033784147224331480815766021027802559948230435986510463390254626692706077672925724014576311760464878465015963687613539457455058651995042987440452644475608079566934962332848227030213573596889675945261887746871614489909656434918354694622947780251220889535032991886014741940245706658399743838565247101865299510968218340648855454355900015170229363000773656171187471625986119384434089602975119388864163900771624765540828894962793143210162039512965088140413692121988432165840200273456550860473558979487673989210993702378953029219144912176410698951398148397963180032093043449823904463061359275894398166042301571696597585673265417655411610235112227005110873958551459547722296576300055357998390654660693474721372066273039948014528563211734217110362558578375009440775980048709868376080694258278832930284507071551526702384945089900125632290591670571166435211734323378173530317165136141005937963760393256228163719439626313620623323478782455062104084480375666738808654363501463497545397357794584602177752099725595120164110785435909465426257935020336531970160332896116671639240087186524622634299564329685799689929016917957774909889560473177230304355411814127724659292714151782518303730119097807637197240853782988159861430593552288279991159397893134973968019493178374741029324951855650193893968326629062603679130248670626300878038429197139050761941201581017318353704193751269113167528267334894437553227705569338354781855313332454139217776985178957624560717350468479307419997176919199663527246805266630041295361604795977731515745375173082254024058464067618654307526352623447309006123560833069987247807356302222817827597466646223132302531639552169255880991359683786531969307886152386636848423537266185017015488829217381690514663607883958296688314098212850030723811739749091561127303459869238578627535530587036290418792569472336106396291775745806930966016825795633008705486616260788398366804211420394048116964397734226604636894293949503820884089927445023963171401724351972222763055943833258251383407714479689544494630195886282438804457835492034215445765457408581218492208862186564488286320140865101978195614840187287336465380099143481306704883121418816508581410824991524462837358617386499878873203968252598037663579409103536395994177637189441802247232036047220222711635532548687752562042968321862087249852064932832407524201186895790284062334287496147445520855485767375826117627930933118514458822536599845078307535668920823934096713684256903257052897302549312803976414869578938793793306057144436567690580540049237458455342294322751330747390229174557257464205171853015242464570399889487423103642838899460224905800291146182472204671938271241269569858186063249638612981310105254155051195718814038356426538114421904631539972825298113510559925045092226912958791455941732794476912013681804539880480183188874870218807873760504931228806253202303952571018424931153787752150037829135236101420843460147830749571067041642523587319086906779779508181951019732521226418518837334474522745088678704270727028050573101610856559468801956266758

--------------------------------------------------------------------------------------------------------
出力例
149564786697191910788440641188766555774244547439617734198280127299593441902257308999775833578131424660855643499655298167733419121094812954456164361806392243302851044797849264452186344646817725609196241062684284980485809030254725212324905061136862693800428700116136583735722720595005869070266382242682377066946309281423380106265492324673603739451083480599376856407418231120761555400940248689440589996784338255716295148179088732407241973213016595620795205662291061385827243311853416060792135708688520533484556341588062365511412835022041245836249504295109669364425199977782209703652702838979659344693181389032668899276031326492041495175060653415355279256517019907130110238053895903702632172878371454424253059198151495684118669347634431358139684336605215754602496195670546611324055277687694615674064732147683348083153500433523288938105514596061167622083723341346542469570636976892097842860806880178174027979401879761572608161013153267446514654462137244451715399535084761188172347004075077425041647262025537584080173671507003738975806990938033627332146053701280902781366394654199795900560940284175663346729500429028850136124148789174057431634308594215655966310947479757206808120845509568495313826099128042372445198779293998305135030392918842406057227303140482369827739515885934778664718959293058940517785321017316226472176140447838038371514124380292479980979714991872099488027705224186084679460324089869087568658415993941350289895281069487719906449886040728571797746756725232227720308214361840010549213495944677498123380419311779099147561775440482639486402952776058141920897759476951626433430059309602267678142020220392247138606424837629310186626594573389831917397647245323879479278232002662169962075101346201791574488566049328271595831395770359727906386648966775711239012084310459339303288130178537119743912266711611752402298880920284266286283308797949906367366062486423911358268718526651860282951107889816961208027920502664812839784843646050147312449322669705852715330082856897967777104626939259323125123966457164160712890887552190093148403153869201847259709272857991164184286521316129691776859468492515034927613800885511540115306931120057997319565129101438110015558325683974099376815992933632280831651965355265647747949825793047110295774290847050410009705186381136623354720308926365892579364057811935064906011617130255959798600115858242659393814540472591426575085441049334202301852830081478731964694985052510731400639126090004956305470625546040414326512929742973155269285748143093376949916751987950065424728103971389030142193043421848221835916035704962148368179824592351033179024358941116987693434185875071672185506412853510601330467042477574869644166515346616221331840272010224758250582644635108789645020414075765364511678827739805636839115525898860034059461933909974795254392564202250148936068582657506645883772178975212647069989941595650360001537876606018557202204511456517723801756544700461932684191641214473244164502601303245955387273361338014396491871528852946551856625761595699536859892101267214969850281031011071404716357425141158716482767009017648913410247996834849436936899872214834615675433335973137900883601315941411379789902799322045676624029507057837818688510275181312805473845952125960610240289915988074284743490639581446471637201749174521333558146948661982234850831255956422143041927690085899700598714901816041386515869258296724565910820594989852328597980605758719499511731186142123926824354171878816406251920156408505935946977919991962247710573538378438375930033843804065355417241191026070837574375194209668057782667804018944254556897300968509280997604338632228790422158526207654546511877724397955242415134329352528482129190085111543261052067562612647366305859595730408775827735579182589429832029879074806123950162753617814594741099303611709358152641278024249493063887215854931089669759951266278145798917469480538992291131808052668976648372011686380816785355872928855220024891354039564793947970831358356744971497612697436004700626486494442753855072025130829534457165996261559320496324333999525239718991411386608112936023826880728471699395429725678007227412268959600245052176017646230917181047509297312109583171773786758406429986494735382276546069446745883253594417310266795714975174185590065197894219707821814500077869013060186916012300832949822809968031594412445575584048336257314301100072381311527699852119232994759443711067377491239515828438443570616601991372268704946187276609151553908468200820774806314977811412341737309215954871222202863226396683723856741684986247846495459183320779125257279471607449472866106253475811631991393793805332071115187725597811045458138986797990165818640243471822245266816984548946909880216418136850249996796196103190864955552453573976009404945793623142091262142892185771052031149425100532662527151325659066046942513764619619348845387911895200383982409036233148304980030774354391515767202365539351808783876532265304903478522591569004594689595922260585633728830219421990931033651002599016097843323316619766177081333629075518098269194547708680434760969532918704517334303392981376726498245647442333709998441674851389547512345454484377149764080621906098475421638558412940765026917857237591692159561926677845636998382062512161005783286762770759301327669144258486390130411340477651802914302223940549986794995280223853150132604328274065619306031891654491142282331426972869461531515403531586842257345298424416712558900626909422850870160661757212517954004582352296583950131721108559870544630720458131870059668594949192400870787034654154133951157220629882354687956623504643290697561965630554469069399632861045273850440127201602155144110337158489272860585928454684947830484696060590359813093690406115743860022674292661901963973499792648629259537207104819716584292019060637309338373261123652483497153361672362573461601361321252930428721663132479005576014568721539379875204623230392264324906530328266008543255821996243401727132349646948029745788621414980540456978404036442357186702459881469357720773181457832501085679372287736887840265431410013245514936204536645554487895337633157260469718705874167068584359461947015522942822716645292334380928891027363043723154494852909644595591686427891897950179197979458956037222316472158586882203216465563518171480986600480699307863755006154276259344105160478885513278332746266488343245950574306221758916194716827265923481179022143426326458719575052555691629930922183603598849338957336576718108639131391725310989217972670877136513630073792327990120849453272845999853799829006472581015596023754619094830507065105456981247172489563394142200767854090867933660994499658420975051917744260091662299070384832495452533926703610964642812208231560387204967527624901232093493359900733500456954443784950322890283589414443254917690129519375977354479458340940646745372350603240729180456810232688073725619746206685618448769591951885570470117500755993403638817217772586168600785707442014938184393160189044910951100708885938367204333077737966652962788783393051316567408697855676979526324240406115826866858971292628420313408725095496345536143440139156004222415037868348064194545431580069948692060854537265489846701468502566531759265470317628126215112274094804789327802064592083419955444457963542326332077125473300052050179053892949009946757467190081630556884018702916283753689873669006810341498176977965212006125393708781552233921233236559550998895703463130964680614458895454677630964362835495645962826896038119062991989700060637950078252991570803262543983396231890475041842609969294471663401761995540799950657917230222869035631504202792720789736035253830724103903267046044098645708098782515071369772862157433226934413131527032303397729237252478486306718099173709103166914197292676225739951921127285162057532560283981701671682296619586113660839943961626024458145011704945113247099784966682974910865556050041083747238435401126939929585899648193080182131864195311088290055692281892989441543052834545102370939927920234656456311331124440854899488040499419404390389163426965113618642587379333986851812354707689736390768809512812969908158732301671379929203883244849119801970009312612209442890807781018034734360965909506810228028630293537606609702387059822598131836363420907749900104553307869463609891960480990124737897474320247302349208179742220312705659475541483225555475360588241955902935748038537738513806493804896262826059751593556012598202566548706229084715004917840610125705079579459420170054519211665993291784999550288695509696170178951830734797110125122338717708016706393579918670631264424206572909683538716176632753399585097420113253752213092115075168383779825331626478121698118525263370083971862097070986003184557137336094423118559956823310549830659888874668237609094245275179335238733274323434459065238564488528623376485531146957615444263880182257277293363363263498794278350341549768407846222621976253068425742988398490411438944461785703245317512522171937224673925231162459770662382132406309983413676200119545809668750289625173093676207314576444241687371760433292134474627082384056234485557595776106925196935251411350273133453887024662881164398196396582799226010275041295260325042852417341024764251003103352165631345907120916704665632827581718090537282376773699889611590394649208707516660050007363340396550045390626370626961143536692418783390211009215676114261451121675792594810126944779551940672441510411596852772919007378427362442800838826944395285218358833247700539274074965513289599665617866353257341608185466891076177490620467740043132856450068251437483352069767441459262815775559135286299131649197590856977242823382621772233536312236092243312433645646367846686348789775597416780185006127044808536776917854669116763846503376982127721153680279767599719954581293261448037033994875819978843585767418312153407828152497055308099084101150474816450043290526946281447102238591288887413375169267675022513267527015633286884342259035067188805797666658239121679088190276252523872392828091864271258646125310913109384720789902081571145859804578138434867972273737838230244378260523032559170076314465499028589242322110758356441401177423925236602108426885238996612059801811109904796464801765253899502923795611657691938761224350187722908015939634597091217785400783859104107607984566696090925505217391637660510763981970236217926567236083484110624128792869235814854259515615798752045150996738288372580823721013127813536878125429803367091316897209299552284414755912990295132964500496334421394728416155254967675727799038738996419325511523893994683052446227828423209142503663310785503479289540281008503473837986049553777014684526165102889538609332849197136538168047670053297764363637398171729396707101947754331471125283658923830119468096094510185199664879813307333499786686800006542355399943544213956747976372856448188870371245115025672525482635984598090592034569828273623372340397202609537361950694879423148959472983762709110372867794658044432597466582339259603789317289343040002730210024284028146425400487004495805398705932116405370839325818414500653440378366788330132652521718486513270716036510199705902873669495325453798789394711527714801319617698829974705979350087491890136522240599750827666995451342486932457644397970581963297441235898578752504102622993498792897553309886654225130800175285349920595581928235762446631975723373179615365367469855994007077673677290722094114932370879150146342981237007518174075265136412036034235438168293428125588794540389075027310210222223733546020745470603893979349583228524749556635721045436622288288279635320943242772526830041582611681924433588028642855461047349193491606744991675066469647608048800413821891229350516074230740306068589945858558691936187260559867648824035418869720904655127993667791149093469023345012326641119735037453464912456075329668907931283786039889675868745551926427019989941560456297948598284423038512577472437670355016307470655916620771915799749868128830397075668885679793679116134914785843257137964871550056281183334761908321527158831483364406055470017800789779410806075347857640466050995141835371611322346659235367324440681327730901024316291170591314241108964003851924508157236127982538294530877118851720226305052864594209071601594279690527913852020011593761376590371775364302107762899389847609829516024089962025849552396538917919317288174726477844121752886539462145177737457372612768817995449468186903653784193273219255517507739046741110165119692280202481147400134411536639404089664227412314172094958439475616828738103093388859709647273999969159200080231664927729417040657563756811237786940488188927435484771108108749795116829445863440554292718198135894119522950921558496170984936501291574743419254707355404366616907911112808700946393031220216038446637287113049527182458135205927203416482216005796892334491525181335107000725103159204234884818679165997019854248073247028413898657610892435228115470546421802992475285980240670122511343698029068336467477130082719793840913428446219947896163037328581263562969788847735539523618366705293528395600740543977236364289385092051723831192492723376892916441531103270367760790970847071267132067977694358194094751969130022177950635740637451848371376909407558432420913544619812533551175047140303572277972744447953891290231633583369776404058878997007955568711265049677408053557084028515557765632283808962148069619178006281399991207865012911814455346905185112523580505747683524529056557166563506040054357701673125038320348181518060979855318145579461851988351038747125940599510624867729158775069688460581696100739292999292437765061371265885124078503307250566408295378647088433223270748614407996762579387710189432959756982806772478226813467152767071449913020224478133806291634085063289887049301304300606686745729042927008926213997940059651338568505957727484048099328000146955883160290304588731273095777973758285317224194074898508484065467187211394695345215099487001484259837212231468667152150367362629929074077723589405143659405634441396142487539889468912063022226656485230779285817497725722319766490705191206069951753984666217398434535321967252322409339996038756845432675598261744914572542557898559889788975557543562333317489369966686725145366025448622900086692734756101869001613428530143975916034256022053855808296463791209950420567259344118113184768163573304926360621700075662417108680497767720533414169393796857565724113089473943464619079587838294082745507858655990243915719157626547659581623747062843341195803326993361256692828425679699440959224150364697984526842160421486183791893551521170557992353604171536015643436179028058658037031819460600762480181473596
--------------------------------------------------------------------------------------------------------

*/

#include <stdio.h>
#include <stdlib.h>

#define N 4 //何個ずつ分けるか

/*
本問では初めから逆順に入れてしまうと、掛け算を行うときに不都合であるので、まずは入力通りにlistに詰める。
それをN個ずつ分け、逆順にする。

前問同様位上げを無視して計算し、最後に位上げを計算した。

詳しいことはプロトタイプ宣言のところで解説する。
*/

/*
Nは何個ずつ区切るかを与える変数である。
試しにN = 1,4,10で試した。
N = 1 2.302u
    4 0.432u
    10 0.277u

計算時間はNに反比例することも確認できた。
*/

typedef long int elementtype;

struct node
{
    elementtype element;
    struct node *next;
};

typedef struct node *list;

list makelist();
list cons(elementtype e, list l);
int length(list l); //使わなかった
void print_int_list(list l);
void insert(list l, elementtype e); //最終的にconsを用いて再構築した。
void delete (list l);               //使わなかった
void kuraiage(list a);              //10^Nで除算、剰余算を行い、前問同様に位上げを計算。
list serch_tail();                  //listの最後の要素ポインタを返す

void print_last_list(list l);       //listの最後から順に出力。
/*
10000進数であるため先頭以外のelementが1000以下であると0が出力されず、位がその分下がってしまう。
これを回避するために10^N-1,10^N-2,10^N-3,,,,10^N-Nと大小を比べ、小さいものの数だけ先頭に0を出力する。
*/

int kajo(int i);                    //10^i を計算する。
int is_list_zero(list l);           //listを数字に直し、0かどうかを確認する
list mul(list l, list q);           //繰り上がりを無視して掛け算を行う
void delete_last(list l);           //使わなかった
list kowake(list l);                //N個ずつ要素を分ける。
list gyakujun(list l);              //listを逆順に並び変える。

int main()
{
    int d;
    char c;
    list l_1, l_2, ans;

    l_1 = makelist();
    

    l_2 = makelist();
 

    while ((c = getchar()) != '\n')
    {                     /* ←読み込んだ数値を c に入れて、改行文字まで以下を繰り返す */
        d = (int)c - '0'; /* ← 読み込んだ数字を int 型として d に格納 */
        /* ※ ここで読み込んだ数字 d を処理 (リストに挿入する、 など)*/

         insert(l_1, d);
    }
    //print_int_list(l_1);

    //print_int_list(kowake(l_1_pre));
    //l_1 = ll_1;
    //print_int_list(l_1);
    //print_int_list(gyakujun(kowake(l_1)));
    //print_int_list(kowake(l_1));

    l_1 = gyakujun(kowake(gyakujun(l_1)));

    while ((c = getchar()) != '\n')
    {                     /* ←読み込ん0だ数値を c に入れて、改行文字まで以下を繰り返す */
        d = (int)c - '0'; /* ← 読み込んだ数字を int 型として d に格納 */
        /* ※ ここで読み込んだ数字 d を処理 (リストに挿入する、 など)*/

         insert(l_2, d);
    }
    //print_int_list(l_2);
    //print_int_list(kowake(l_2_pre));
    //print_int_list(gyakujun(kowake(l_2)));

    l_2 = gyakujun(kowake(gyakujun(l_2)));
    if (!is_list_zero(l_1) || !is_list_zero(l_2))
    {

        printf("0\n");
    }
    else
    {
        //printf("111111111111111111111111\n");
        ans = mul(l_1, l_2);
        //print_int_list(ans);
        kuraiage(ans);
        print_last_list(ans);
        //printf("length = %d\n",length(ans));
    }
    //print_int_list(ans);

    return 0;
}

list makelist()
{
    list l;
    l = (list)malloc(sizeof(struct node));
    l->next = NULL;
    return l;
}

list cons(elementtype e, list l)
{
    list q;
    q = makelist();
    q->element = e;
    q->next = l;
    return q;
}

int length(list l)
{
    list k;
    k = l;
    k = k->next;
    int length = 0;
    //printf("%d yeah!\n",k->next->element);
    while (k)
    {
        length++;
        k = k->next;
    }
    return length;
}

void print_int_list(list l)
{

    l = l->next;
    while (l)
    {
        printf("%ld\n", l->element);
        l = l->next;
    }
    printf("\n");
}

void insert(list l, elementtype e)
{
    l->next = cons(e, l->next);
}

void delete (list l)
{
    list q;
    q = l->next;
    l->next = q->next;
    free(q);
}

void kuraiage(list a)
{
    //print_int_list(a);
    //printf("111111111111111111\n");
    list a_last, a_f;
    a_last = serch_tail(a);
    a_f = a;
    //printf("a->element = %c\n", a->element);
    a = a->next;
    while (a)
    {
        //printf("22222222222222222222222\n");
        if (a->element >= kajo(N))
        {
            //printf("3333333333333333333333333\n");
            if (a == a_last)
            {
                //printf("4444444444444444444444444\n");
                list q;
                q = makelist();
                q->element = a->element / kajo(N);
                a->element = a->element % kajo(N);
                a_last->next = q;
                a_last = q;
                q->next = NULL;
            }
            else
            {
                //printf("55555555555555555555555\n");
                a->next->element += a->element / kajo(N);
                a->element = a->element % kajo(N);
            }
        }
        a = a->next;
    }
    //printf("done\n");
    a = a_f;
    //print_int_list(a);
}

list serch_tail(list l)
{
    list p = l;

    while (p->next != NULL)
    {
        p = p->next;
    }

    return p;
}
void print_last_list(list l)
{
    //printf("%d", serch_tail(l)->element);
    int i = serch_tail(l)->element;
    int j = 0;
    if (i == 0)
    {
        list q;
        q = l;
        while (q->next->next)
        {
            q = q->next;
        }
        q->next = NULL;
    }
    while (l != serch_tail(l))
    {
        if (j != 0 && serch_tail(l)->element < kajo(N - 1))
        /*
        10000進数であるため先頭以外が1000以下であると0が出力されず、位がその分下がってしまう。
        これを回避するために10^N-1,10^N-2,10^N-3,,,,10^N-Nと大小を比べ、小さいものの数だけ先頭に0を出力する。
        j = 0 すなわち先頭要素の時は0は出力しなくていいので無視。
        */
        {
            for (int k = 0; k < N - 1; k++)
            {
                if (serch_tail(l)->element < kajo(N - 1 - k))
                {
                    printf("0");
                }
            }
        }
        printf("%ld", serch_tail(l)->element);
        list q;
        q = l;
        while (q->next->next)
        {
            q = q->next;
        }
        q->next = NULL;
        j++;
    }
    printf("\n");
}

int kajo(int i)
{
    int ans = 1;
    while (i > 0)
    {
        ans *= 10;
        i--;
    }
    return ans;
}

int is_list_zero(list l)
{
    int flag = 0;
    l = l->next;
    for (int i = 0; l != NULL; i++)
    {
        flag += l->element * kajo(i);
        l = l->next;
        if (flag > 0)
        {
            return 1;
        }
    }
    return 0;
}

list mul(list l, list q)
{
    int i = 1;
    list ans, ans_f, q_f;
    ans = makelist();
    ans_f = ans;

    for (int i = 0; i < length(l) + length(q); i++)
    {
        insert(ans, 0);
    }
    //print_int_list(ans);
    l = l->next;
    q = q->next;
    q_f = q;
    ans = ans->next;
    while (l)
    {
        while (q)
        {
            //printf("足し算の前　ans->element = %d\n",ans->element);
            //printf("l->element * q->element = %d\n",l->element * q->element);
            ans->element = l->element * q->element + ans->element;
            //printf("足し算の後　ans->element = %d\n",ans->element);
            q = q->next;
            ans = ans->next;
            //print_int_list(ans_f);
        }
        l = l->next;
        q = q_f;
        i++;
        ans = ans_f;
        for (int j = 0; j < i; j++)
        {
            ans = ans->next;
        }
    }
    return ans_f;
}

void delete_last(list l)
{
    while (l->next->next)
    {
        l = l->next;
    }
    delete (l);
}

list gyakujun(list l)
{
    list q, q_f;
    q = makelist();
    q_f = q;
    //printf("l->next->element = %d\n",l->element);
    while (l->next)
    {
        //printf("delete\n");
        //printf("l->element last = %d\n",serch_tail(l)->element);
        insert(q, serch_tail(l)->element);
        delete_last(l);
        //printf("after delete l->element last = %d\n",serch_tail(l)->element);
        //printf("q->next->element last = %d\n",q->next->element);
        //print_int_list(q);
        q = q->next;
    }
    //print_int_list(q);
    return q_f;
}

list kowake(list l)
{
    list q;

    q = makelist();

    //printf("serch_tai(l)->element = %d\n",serch_tail(l)->element);

    while (l->next)
    {
        //printf("serch_tai(l)->element = %d\n",serch_tail(l)->element);
        int doge = 0;
        for (int j = 0; j < N; j++)
        {
            if (!l->next)
            {
                //printf("break\n");
                break;
            }

            doge += serch_tail(l)->element * kajo(j);
            delete_last(l);

            //printf("serch_tai(l)->element = %d\n",serch_tail(l)->element);
            //printf("doge = %d\n",doge);
        }
        //printf("doge = %d\n",doge);
        //printf("oo\n");
        //printf("l = %d\n",l->element);
        insert(q, doge);
        //print_int_list(q);
    }
    //printf("o\n");
    return q;
}
